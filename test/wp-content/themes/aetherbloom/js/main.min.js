!function(){"use strict";let e=1,t=null,n=null;function o(){t=document.getElementById("main"),n=document.getElementById("fixed-video-container"),function(){if(!t||!n)return;function o(){const o=t.scrollTop,i=window.innerHeight,c=.4*i,r=.9*i;let a;if(o<=c)a=1;else if(o>=r)a=0;else{const e=(o-c)/(r-c);a=1-e*e}Math.abs(a-e)>.01&&(e=Math.max(0,Math.min(1,a)),n.style.opacity=e,n.style.visibility=e>0?"visible":"hidden")}let i;function c(){i||(i=requestAnimationFrame(()=>{o(),i=null}))}t.addEventListener("scroll",c)}(),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const n=this.getAttribute("href");if("#"===n)return;const o=document.querySelector(n);if(o){e.preventDefault();const i="#hero"===n?t:document.querySelector(".content-wrapper");if(i){const e="#hero"===n?0:o.offsetTop-i.offsetTop;i.scrollTo({top:e,behavior:"smooth"})}}})}),function(){const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;e.isIntersecting?(t.classList.add("visible"),t.classList.remove("fade-out"),t.classList.add("fade-in")):(t.classList.remove("visible"),t.classList.add("fade-out"),t.classList.remove("fade-in"))})},{threshold:.1,rootMargin:"-50px 0px -50px 0px"});document.querySelectorAll(".section-content, .hero-content, .why-content, .services-content, .calculator-wrapper, .cta-wrapper").forEach(t=>{e.observe(t)})}(),function(){const e=document.getElementById("contact-form");e&&e.addEventListener("submit",i)}(),function(){const e=document.getElementById("newsletter-modal"),t=document.getElementById("open-newsletter-modal"),n=e.querySelector(".close-button");t&&e&&n&&(t.addEventListener("click",()=>{e.style.display="flex"}),n.addEventListener("click",()=>{e.style.display="none"}),window.addEventListener("click",t=>{t.target==e&&(e.style.display="none")}))}(),function(){const e=document.querySelector(".fixed-video");e&&(e.addEventListener("loadeddata",()=>{e.paused&&e.play().catch(e=>{console.log("Video autoplay prevented:",e)})}),e.addEventListener("error",e=>{console.error("Video error:",e),n&&(n.style.display="none")}))}(),console.log("Aetherbloom theme initialized")}function i(e){e.preventDefault();const t=new FormData(e.target);t.append("action","aetherbloom_contact_form");const n=e.target.querySelector('button[type="submit"]'),o=n.textContent;n.textContent="Sending...",n.disabled=!0,fetch(aetherbloom_ajax.ajax_url,{method:"POST",body:t}).then(e=>e.json()).then(t=>{t.success?(c(t.data,"success"),e.target.reset()):c(t.data,"error")}).catch(e=>{c("An error occurred. Please try again.","error")}).finally(()=>{n.textContent=o,n.disabled=!1})}function c(e,t){document.querySelectorAll(".notification").forEach(e=>e.remove());const n=document.createElement("div");n.className=`notification notification--${t}`,n.innerHTML=`\n            <div class="notification__content">\n                <span class="notification__message">${e}</span>\n                <button class="notification__close" aria-label="Close notification">&times;</button>\n            </div>\n        `,n.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            padding: 1rem 1.5rem;\n            border-radius: 8px;\n            color: white;\n            font-family: var(--font-body);\n            font-size: 0.9rem;\n            max-width: 400px;\n            backdrop-filter: blur(10px);\n            animation: slideInRight 0.3s ease-out;\n            ${"success"===t?"background: rgba(76, 175, 80, 0.9);":"background: rgba(244, 67, 54, 0.9);"}\n        `;const o=document.createElement("style");o.textContent="\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n            \n            .notification__content {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                gap: 1rem;\n            }\n            \n            .notification__close {\n                background: none;\n                border: none;\n                color: white;\n                font-size: 1.2rem;\n                cursor: pointer;\n                padding: 0;\n                line-height: 1;\n            }\n        ",document.head.appendChild(o),document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},5e3);n.querySelector(".notification__close").addEventListener("click",()=>{n.remove()})}function r(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),window.addEventListener("resize",r(function(){if(t&&n){const e=new Event("scroll");t.dispatchEvent(e)}},250)),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.classList.add("reduced-motion"),window.AetherbloomTheme={showNotification:c,debounce:r,throttle:function(e,t){let n;return function(){const o=arguments,i=this;n||(e.apply(i,o),n=!0,setTimeout(()=>n=!1,t))}}}}();