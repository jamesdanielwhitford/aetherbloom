document.addEventListener("DOMContentLoaded",function(){const animatedGraphics=document.querySelector(".animated-graphics");if(!animatedGraphics)return;const columns=3;const rows=14;const colors=["petal-coral","petal-green"];const overlayPositionTemplate=[{startRow:2,startCol:0,type:"first-image"},{startRow:5,startCol:1,type:"second-image"},{startRow:8,startCol:0,type:"third-image"},{startRow:11,startCol:1,type:"fourth-image"}];for(let section=0;section<2;section++){const sectionStartRow=section*rows;for(let row=0;row<rows;row++){const actualRow=sectionStartRow+row;for(let col=0;col<columns;col++){const diagonalType=(actualRow+col)%2===0?"petal-diagonal1":"petal-diagonal2";const colorIndex=(actualRow+col)%2;const colorClass=colors[colorIndex];const petal=document.createElement("div");petal.classList.add("petal",diagonalType,colorClass);petal.dataset.row=actualRow;petal.dataset.col=col;petal.dataset.section=section;petal.setAttribute("aria-hidden","true");petal.style.gridRow=actualRow+1;petal.style.gridColumn=col+1;animatedGraphics.appendChild(petal)}}overlayPositionTemplate.forEach((template,index)=>{const actualRow=sectionStartRow+template.startRow;const overlay=document.createElement("div");overlay.classList.add("overlay-image");overlay.dataset.section=section;overlay.dataset.type=template.type;overlay.setAttribute("aria-hidden","true");const imagePath=`assets/images/overlay-${template.type}.webp`;overlay.style.backgroundImage=`url(${imagePath})`;const cornerStyle=(actualRow+template.startCol)%2===0?"overlay-tl-br":"overlay-tr-bl";overlay.classList.add(cornerStyle);overlay.style.gridArea=`${actualRow+1} / ${template.startCol+1} / span 2 / span 2`;overlay.style.opacity=1;animatedGraphics.appendChild(overlay)})}const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!prefersReducedMotion){animatedGraphics.classList.add("animate-petals")}else{animatedGraphics.classList.add("static-petals")}const calculatePatternHeight=()=>{const petalHeight=180;const gapHeight=24;const totalRows=rows;const totalGaps=rows-1;return petalHeight*totalRows+gapHeight*totalGaps};const patternHeight=calculatePatternHeight();document.documentElement.style.setProperty("--pattern-height",`${patternHeight}px`);function ensurePerfectLoop(){if(prefersReducedMotion)return;const computedStyle=window.getComputedStyle(animatedGraphics);const transform=computedStyle.getPropertyValue("transform");if(transform.includes("matrix")&&parseFloat(transform.split(",")[5])<=-patternHeight+1){animatedGraphics.style.transition="none";animatedGraphics.classList.remove("animate-petals");void animatedGraphics.offsetWidth;animatedGraphics.classList.add("animate-petals");setTimeout(()=>{animatedGraphics.style.transition=""},50)}}if(!prefersReducedMotion){setInterval(ensurePerfectLoop,500)}});